# AUTO-GENERATED BY CHEF - DO NOT MODIFY

topology '<%= @chef_server_data['topology'] %>'
api_fqdn '<%= @chef_server_data['api_fqdn'] %>'

# Server blocks
<% @chef_servers.each do |server| -%>
server '<%= server["fqdn"] %>',
  :ipaddress => '<%= server["ipaddress"] %>',
  <% if server["bootstrap"] -%>
  :bootstrap => true,
  <% end -%>
  :role => '<%= server["role"] %>'
<%   if server["role"] == 'backend' -%>

backend_vip '<%= server["fqdn"] %>',
  :ipaddress => '<%= server["ipaddress"] %>'
<%   end -%>

<% end -%>

<% @chef_server_config.each_pair do |component, tunables| -%>
<% tunables.each_pair do |name, value| -%>
<% value = %Q["#{value}"] if value.kind_of?(String) %>
<%= "#{component}['#{name}'] = #{value}" %>
<% end -%>
<% end -%>